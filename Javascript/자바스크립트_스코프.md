### 스코프 (Scope)

---

- 변수나 매개변수에 접근할 수 있는 범위

- 종류 : 함수 스코프, 블록 스코프

- 함수나 블록이 선언된 위치에 따라 중첩해서 스코프가 정의될 수 있음

<div style="margin: 50px"></div>

### 함수 스코프 (var)

---

- 선언된 함수 단위로 생성되는 스코프

- 함수 스코프 내에서 선언된 변수들, 함수들은 모두 해당 함수 스코프에 속함

  - func 함수가 선언되면서 함수 스코프를 생성하고, 그 안에는 변수 one과 함수 getName이 속하게 되는 것

  <div style="margin: 10px"></div>

  ```js
  function func() {
    const one = 1;
    if (one) {
      var two = 2;
    }
    console.log(two); // 2
  }

  func();
  ```

  - var로 선언한 변수는 함수 스코프를 따르기 때문에 if문(블록) 안에 변수를 작성해도 if문 밖에서도 해당 변수에 접근이 가능함 (주의!)

<div style="margin: 50px"></div>

### 블록 스코프 (let, const)

---

- 블록({}) 단위로 변수의 유효 범위를 제한함

- 블록 : if문, while문, for문...

- 앞서 함수 스코프에서 발생했던 문제점을 해결

- **블록 스코프를 갖는 변수가 되도록 선언하는 것이 직관적이고 버그를 줄이는 데 도움이 됨**

  ```js
  function func() {
    const one = 1;
    if (one) {
      const two = 2;
    }
    console.log(two); // Error!!
  }

  func();
  ```

  - 블록 스코프를 따르는 let, const를 이용해 선언한 변수는 블록 외부에서 해당 변수에 접근하려 했을 때 에러 발생

<div style="margin: 50px"></div>

### 렉시컬 스코프

---

- 프로그래밍 언어의 스코프 대부분은 동적 스코프와 렉시컬 스코프로 나뉨

- **동적 스코프** : 런타임 중 함수의 호출에 의해 결정

- **렉시컬 스코프** : 변수나 함수를 작성한 위치에 따라 결정

- 자바스크립트는 렉시컬 스코프를 기반으로 동작

- 함수를 어느 위치에 작성했는지에 따라 명확한 경계를 가지며, 동일한 경계를 가진 스코프는 존재 불가 (렉시컬 스코프 규칙에 따라 스코프 경계 결정)

  ```js
  function func() {
    var one = 1;
    function getNum(num) {
      console.log(one); // 1
      console.log(num); // 3
    }
    getNum(3);
  }

  func();
  ```

  - 위의 코드는 3개의 스코프가 중첩되어있음

  - 위의 코드 전체를 감싸고 있는 전역 스코프 (1), func 함수 선언 시 생성된 스코프 (2), getNum 함수 선언 시 생성된 스코프 (3)

  - **`console.log(one);`을 실행하는 과정** : one을 출력하기 위해 getNum 함수에서 변수를 탐색 -> 변수를 찾지 못했으므로 가장 가까운 상위 스코프인 func 스코프로 가서 다시 탐색 -> 변수를 찾으면 해당 변수를 사용하고 탐색 중단

  - 중첩된 스코프 내에서 코드가 실행되는 경우, 가장 안쪽의 스코프에서부터 코드를 실행하여 점차 상위스코프로 올라가며 탐색 => 상위 스코프에서는 하위 스코프의 변수나 함수에 접근 불가능

    > 스코프 체인 : 스코프들의 연결 관계

    > 스코프 체이닝 : 스코프 체인을 따라 탐색하는 과정

<div style="margin: 20px"></div>

**=> 함수스코프 & 블록스코프 : 스코프의 단위**

**=> 렉시컬 스코프 : 스코프들의 범위를 결정하는 규칙**
