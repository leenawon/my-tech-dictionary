### 호이스팅 (Hoisting)

---

- 선언문이 스코프 내의 최상단으로 끌어올려지는 것

- 스코프 안에서 변수를 선언하면 발생하는 현상

  ```js
  console.log(one); // undefined

  var one = 1;
  ```

  - 호이스팅으로 인해 변수가 최상단에 끌어올려진 것 처럼 동작하기 때문에 변수를 선언하기 전 접근하였을 때 오류가 발생하지 않음

<div style="margin: 10px"></div>

- **변수 생성 과정**

  - **선언** : 스코프에 변수를 선언

  - **초기화** : 변수의 값을 undefined로 초기화 (이 단계부터 변수에 접근 가능)

  - **할당** : 변수에 실제 값을 할당

    ```js
    var one; // 선언, 초기화 한 번에 이루어짐
    console.log(one);
    one = 1; // 할당
    ```

- 스코프 별로 호이스팅이 동작하는 방식

  - 함수 내에서 선언된 변수는 함수 스코프 내에서 호이스팅됨

    ```js
    function func() {
      console.log(one);
      var one = 1;
      // 실제 처리되는 코드 형태
      // var one;
      // console.log(one);
      // one = 1;
    }
    ```

  - let과 const로 선언된 변수의 경우

    - var로 선언한 변수와는 생성 과정의 차이가 존재해서 선언과 초기화 단계가 분리되어 이루어짐

    - 선언 단계는 var로 선언한 변수와 마찬가지로 스코프 내부의 최상단으로 끌어올려져서 진행되지만, 초기화 단계는 변수를 선언한 실제 선언문을 만나야 진행됨

    - 초기화 단계 이전에 (변수 선언문이 나오기 전) 변수에 접근하려하면 에러 발생!

    > **TDZ** (Temporal Dead Zone) : 선언 단계가 실행되는 스코프의 최상단 부터 초기화 단계를 시작하는 선언문이 나오기 전까지의 영역 (= **변수에 접근할 수 없는 영역**)

    ```js
    console.log(one); // Error!! (초기화 단계 전에 접근함)
    const one = 1;
    ```

    ```js
    let one = 1;

    function func() {
      console.log(one); // Error!! (지역 변수 one에 먼저 접근하게 되는데, 선언문이 오기 전 TDZ 영역에서 접근했으므로 에러 발생)
      let one = 1;
    }

    func();
    ```

- 함수 호이스팅

  - 함수 선언문의 경우 함수의 선언, 초기화, 할당 단계가 모두 스코프 최상단에서 이루어짐 => 어디에서나 함수 접근이 문제 없이 가능

    ```js
    console.log(func()); // 1 (함수 선언문이 오기 전 호출해도 문제 없음)

    function func() {
      let one = 1;
      console.log(one);
    }
    ```

  - 함수 표현식의 경우에는 호이스팅 규칙에 따라 동작
