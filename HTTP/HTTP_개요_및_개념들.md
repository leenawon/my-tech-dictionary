### HTTP 정리!

---

HTTP는 현대 인터넷의 공용어로, 모든 웹 브라우저, 웹 애플리케이션은 HTTP를 통해 서로 대화한다. HTTP는 전 세계의 웹 서버로 부터 대량의 정보를 빠르게, 정확하게 사람들의 웹 브라우저로 옮겨준다.
HTTP는 신뢰성있는 데이터 전송 프로토콜을 사용해, 전송 과정 중에 데이터가 손상되지 않게 보장해주는 특징이 있다.

<div style="margin: 30px"></div>

### 클라이언트와 서버 사이의 관계

---

우리가 볼 수 있는 웹 컨텐츠들은 웹 서버(HTTP 서버)안에 존재한다. 따라서 이러한 웹 서버는 인터넷의 데이터를 저장하고, 클라이언트가 요청한 데이터를 제공해주는 역할을 한다.

클라이언트가 보낸 HTTP 요청을 서버가 받아 요청된 데이터에 대한 처리를 하고 그 응답값을 다시 클라이언트에게 전송해주는 것이다.
(여기서 클라이언트라고 칭하는 것은 다른 어려운 개념이 아니라, 우리가 항상 당연시 사용하고 있는 브라우저를 의미한다.)

<div style="margin: 30px"></div>

### 리소스 (Resource)

---

그렇다면 웹 컨텐츠의 원천이 되는 개념이 뭘까? 그건 바로 리소스이다. <br/>
리소스 역시 서버가 관리하고 제공하는 것으로, 정적 파일일 수도 있고 동적 파일 일 수도 있다. 동적 리소스는 요청에 따라 컨텐츠를 만들어내는 것으로, 몇 시에 요청했는지, 요청인이 누구인지에 따라 다른 컨텐츠를 생성하는 것이다.

<div style="margin: 30px"></div>

### MIME (미디어 타입)

---

이렇게 만들어진 데이터들이 전송이 될 것인데, 인터넷에서 전송되는 데이터들은 그 타입이 아주 다양하기 때문에 HTTP는 MIME(Multipurpose Internet Mail Extensions)이라는 데이터 포맷 라벨을 데이터 각각에 붙여준다.

```
(예시) Content-type: image/png
```

웹 서버는 모든 HTTP 객체 데이터에 MIME 타입을 붙여서 클라이언트(브라우저)에 전송해주고, 데이터를 받은 브라우저는 다룰 수 있는 객체인지 타입을 보고 확인한다.

<div style="margin: 30px"></div>

### URI (Uniform Resource Identifier)

---

서버에 담긴 리소스들은 각자가 URI 라고 불리는 이름을 가지고 있는데, 이 이름을 통해 리소스들을 고유하게 식별하고 위치를 지정할 수 있다. URI에는 URL과 URN 두 종류가 있다.

<div style="margin: 30px"></div>

#### 1. URL (Uniform Resource Locator)

- URL은 리소스 식별자(URI)의 가장 흔한 형태로, 특정 서버에 위치한 리소스에 대한 구체적인 위치를 알려준다. 정확히 어디에 있는지, 어떻게 접근할 수 있는지 서술한다.

```
프로토콜|서버의 인터넷 주소|서버의 리소스
https://www.naver.com/index.html
```

- 첫번째는 리소스에 접근하기 위해 사용하는 프로토콜을 의미하고, 두번째는 서버의 인터넷 주소, 마지막은 서버에 담긴 리소스를 의미한다.
  따라서 저 한 줄에 담긴 뜻은, HTTP 프로토콜을 사용해 www.naver.com으로 이동하고, index.html이라 불리는 리소스를 가져와라 라는 의미이다.
  위와 같은 형태를 띄는 것이 URL인데, 현재 우리가 정말 흔히 웹사이트를 접속하기 위해 사용하고 있다.

<div style="margin: 30px"></div>

#### 2. URN (Uniform Resource Name)

- URN은 리소스의 위치에 영향을 받지 않는 유일한 이름이라는 의미이다.
  위치라는 것에 있어서 독립적이기 때문에, 리소스를 여기저기 옮겨도 문제 없이 동작한다는 특징이 있다.
  다만 아직 별로 널리 사용되고 있지 않다.

<div style="margin: 30px"></div>

### 트랜젝션 (Transaction)

---

HTTP 트랜젝션은 클라이언트에서 서버로 보내는 요청과 그에 대한 응답 결과로 구성되어 있다.
HTTP 요청 메시지에는 명령과 URI를 포함하고 있고, HTTP 응답 메시지에는 트랜젝션을 통한 결과를 포함한다.

<div style="margin: 30px"></div>

### 메서드 (Methods) & 상태코드 (Status Code)

---

메서드는 한 마디로 여러 종류의 요청 명령을 말한다. 서버에게 어떤 동작을 취해야 하는지 알려주는 것이다.
모든 HTTP 요청 메시지는 한 개의 메서드를 가지고 있고, (ex. GET, POST, PUT, DELETE, HEAD)
모든 HTTP 응답 메시지는 응답에 대한 상태 코드를 포함하고 있다. (ex. 200, 302, 400)

<div style="margin: 30px"></div>

### TCP 커넥션

---

HTTP는 네트워크 통신의 세부적인 것은 신경쓰지 않고 신뢰성있는 인터넷 프로토콜인 TCP/IP에게 맡긴다.
TCP는 오류없는 데이터 전송을 해준다는 점, 데이터는 언제나 보낸 순서대로 도착한다는 점, 언제든 어떤 크기로든 보낼 수 있다는 점을 제공해주기 때문에 신뢰성있다고 이야기한다.
TCP/IP는 어떤 종류의 컴퓨터나 네트워크던지 간에 서로 신뢰성있는 의사소통을 하게 해준다.

TCP 커넥션이 맺어지면, 클라이언트와 서버간에 교환된 메시지의 순서가 뒤바뀌거나, 없어지거나, 손상되지 않는다.
TCP 커넥션을 맺기 위해서는 서버의 IP주소와 포트번호가 필요하다. 해당 정보는 URL을 이용해서 구할 수 있다.
URL은 리소스에 대한 주소이므로, 우리가 원하는 정보를 얻을 수 있게 해준다.

```
http://207.200.83.29:80/index.html
http://www.naver.com/index.html
```

위의 URL을 예시로 들었을 때, 첫번째 URL에는 서버의 IP주소와 포트번호가 모두 들어있어 우리가 정보를 얻을 수 있음을 알 수 있다. 반면에 두번째 URL은 첫번째와 같이 숫자로 되어있는 IP주소와 포트번호 두 가지 모두 없는 것을 볼 수 있는데, www.naver.com 이라는 것은 IP주소에 대해 이해하기 쉬운 별명 같은 호스트명을 뜻하는 것이기 때문에 문제가 되지 않는다.

이 호스트명은 DNS(Domain Name Service)를 통해 쉽게 IP로 변환되기에 괜찮다. 포트번호는 80을 기본 값으로 갖고 있기 때문에 이 역시도 문제되지 않는다고 보면 된다.

```
웹 브라우저가 서버로부터 리소스를 받아오는 일련의 과정
:
서버의 URL에서 호스트명을 추출 -> 서버의 호스트명을 IP주소로 변환
-> URL에서 포트번호가 있다면 추출 -> 서버와의 TCP 커넥션을 맺음
-> 서버에 HTTP 요청을 보냄 -> 서버로부터 HTTP 응답 결과를 돌려받음
-> 최종적으로 커넥션이 닫히면, 웹 브라우저가 리소스를 보여줌
```

<div style="margin: 30px"></div>

### 웹의 구성 요소

---

#### 1. 프록시 (Proxy)

- 프록시는 웹 보안, 애플리케이션 통합과 성능 최적화를 위한 중요 요소 중 하나로, 클라이언트와 서버 사이에 위치한 HTTP 중개자의 역할을 담당한다.
  클라이언트의 모든 요청을 담아 서버로 전달해주고, 주로 보안을 위해 사용된다.
  프록시는 요청과 응답을 필터링 해 애플리케이션의 바이러스를 검출하거나 하는 역할도 해준다.

#### 2. 캐시 (Cache)

- 캐시는 많이 찾는 웹 페이지를 클라이언트 가까이 위치하는 곳에 보관하는 HTTP 창고 역할을 담당한다.
  웹 캐시와 캐시 프록시는 자주 찾는 문서의 사본을 저장해두는 특별한 HTTP 프록시 서버이다.

- 클라이언트가 다음번에도 해당 문서를 요청하면 멀리 떨어진 서버로 부터 받는 것이 아닌, 근처의 캐시가 가지고 있는 사본을 받을 수 있기에 속도가 빨라질 수 있는 것이다.
  HTTP는 캐시를 효율적으로 동작하게 하고, 캐시된 컨텐츠를 최신 버전으로 유지하면서 동시에 프라이버시도 보호할 수 있게 한다.

#### 3. 게이트웨이 (Gateway)

- 게이트웨이는 서버들 사이의 중개자 역할을 하는 특별한 서버이다. 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용되며, 클라이언트가 자신이 게이트웨이와 통신하는지 모를 만큼 스스로가 진짜 리소스를 가지고 있는 서버인 것 처럼 요청을 수행한다.

#### 4. 터널 (Tunnel)

- 터널은 두 커넥션 사이의 날 것의 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션 역할을 한다.
  주로 HTTP 데이터가 아닌 것을 HTTP 연결을 통해 그대로 전송해 주기 위해 사용된다.

#### 5. 에이전트 (Agent)

- 에이전트는 사용자를 위해 HTTP 요청을 만들어주는 프로그램이다. 웹 요청을 만드는 애플리케이션들은 모두 HTTP 에이전트라고 볼 수 있다.
